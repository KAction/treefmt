#!/usr/bin/env bash
if ! has nix_direnv_version || ! nix_direnv_version 2.2.0; then
    source_url "https://raw.githubusercontent.com/nix-community/nix-direnv/2.2.0/direnvrc" "sha256-5EwyKnkJNQeXrRkYbwwRBcXbibosCJqyIUuz9Xq+LRc="
fi
# Environment variables for the project. See https://direnv.net/
if nix flake metadata &>/dev/null; then
  use flake
else
  use nix
fi

# export location of llvm tools for use in code coverage
# see https://discourse.nixos.org/t/llvm-profdata-grcov-and-rust-code-coverage/19849/2 for background
LLVM_PROFDATA=$(which llvm-profdata)
LLVM_PATH=$(dirname "${LLVM_PROFDATA}")
export LLVM_PATH